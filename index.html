<!DOCTYPE html>
<html>
	<head>
		<title>Vite un diapo</title>
		<meta charset="utf-8" />
		<style>
			html {
				background-color: #BBB;
				font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif,"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"!important;
			}
			body {
				margin: 3em auto;
				padding: 2rem;
				background:white;
				max-width: 850px;
				border-radius:15px;
				font-size: 1.03rem;
			}
			h1 {
				font-size: 2.25rem;
				margin-bottom:10px;
				margin-top:10px;}
			h1,
			p {
				text-align: center;
			}
			textarea {
				width: 95%;
				max-width: 750px;
				display: block;
				margin: auto;
				margin-top: 30px;
				height: 60vh;
				font-family: monospace;
				font-size: 0.95em;
				border-radius: 5px;
				background-color: #f6f8fa;
				border: 1px solid #e5e7eb;
			}
			button {
				margin: auto;
				display: block;
				margin-top: 20px;
				font-size:1.1rem;
				background-color: #0070f3;
				color:white;
				border:0;
				border-radius: 4px;
				padding: 6px 12px;
			}
			footer {
				font-size: 0.8em;
				text-align: center;
				margin: auto;
				margin-top:3em;
				color:#555;
				border-top:1px solid #BBB;
				padding-top:1em;
				max-width: 600px;
			}
			footer a {
				color: #0453ad;
				text-decoration: none;
			}
		</style>
	</head>
	<body>
		<h1>Vite un diapo</h1>
		<p>Copier-coller votre markdown ici et cliquer sur le bouton “Convertir”</p>
		<textarea id="input">
<!-- Vous pouvez modifier comme vous le souhaitez les paramètres ci-dessus et copier-coller ensuite votre markdown. -->

# Titre

## Titre 2

### Titre 3

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi condimentum rutrum ornare. Proin vel mi euismod, egestas nisl nec, laoreet quam. Morbi eu urna id lorem venenatis convallis. Nam facilisis rutrum lacus, sed euismod enim ultricies vitae. Nulla nec posuere eros. Praesent maximus ligula urna. Quisque dapibus vel risus id dignissim. Sed rhoncus enim pharetra odio rhoncus vulputate. Curabitur sapien erat, fringilla placerat accumsan eget, gravida nec elit. Maecenas id interdum ligula, a efficitur dui. Maecenas tincidunt, risus in venenatis porta, neque magna interdum nibh, eu fringilla est lorem ac tellus. Mauris erat massa, ultricies ut posuere quis, molestie a lacus. Etiam velit eros, mollis sit amet est ut, sollicitudin feugiat metus. Ut orci enim, lacinia ac velit et, auctor dapibus urna.

</textarea>
		<button onclick="convert()">Convertir</button>
		<footer>Outil libre et gratuit, créé par <a href="http://eyssette.github.io/">Cédric Eyssette</a>. Plus d'informations sur la <a href="https://eyssette.forge.aeif.fr/vite-un-diapo/">page d'accueil</a>.</footer>
		<script
			type="text/javascript"
			src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/markdown-it@13.0.1/dist/markdown-it.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/markdown-it-emoji@2.0.2/dist/markdown-it-emoji.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/markdown-it-mark@3.0.1/dist/markdown-it-mark.min.js"></script>
		<script>
			var md=window.markdownit({html: true, breaks:true}).use(window.markdownitEmoji).use(window.markdownitMark)
			/* https://github.com/docarys/markdown-it-admonition */
			options={html:true, breaks:true};var minMarkers=3,markerStr=options.marker||"!",markerChar=markerStr.charCodeAt(0),markerLen=markerStr.length,validate=validateDefault,render=renderDefault,type="",title=null,types=options.types||["note","abstract","info","tip","success","question","warning","failure","danger","bug","example","quote"];function renderDefault(e,r,n,t,i){var a=e[r];return"admonition_open"===a.type?e[r].attrPush(["class","admonition "+a.info]):"admonition_title_open"===a.type&&e[r].attrPush(["class","admonition-title"]),i.renderToken(e,r,n,t,i)}function validateDefault(e){var r=e.trim().split(" ",2);return title="",type=r[0],r.length>1&&(title=e.substring(type.length+2)),types.includes(type)}function admonition(e,r,n,t){var i,a,o,l,s,d,m,p,u=!1,k=e.bMarks[r]+e.tShift[r],c=e.eMarks[r];if(markerChar!==e.src.charCodeAt(k))return!1;for(i=k+1;i<=c&&markerStr[(i-k)%markerLen]===e.src[i];i++);if((o=Math.floor((i-k)/markerLen))<minMarkers)return!1;if(i-=(i-k)%markerLen,l=e.src.slice(k,i),s=e.src.slice(i,c),!validate(s))return!1;if(t)return!0;for(a=r;!(++a>=n)&&!((k=e.bMarks[a]+e.tShift[a])<(c=e.eMarks[a])&&e.sCount[a]<e.blkIndent);)if(markerChar===e.src.charCodeAt(k)&&!(e.sCount[a]-e.blkIndent>=4)){for(i=k+1;i<=c&&markerStr[(i-k)%markerLen]===e.src[i];i++);if(!(Math.floor((i-k)/markerLen)<o||(i-=(i-k)%markerLen,(i=e.skipSpaces(i))<c))){u=!0;break}}return m=e.parentType,p=e.lineMax,e.parentType="admonition",e.lineMax=a,(d=e.push("admonition_open","div",1)).markup=l,d.block=!0,d.info=type,d.map=[r,a],(d=e.push("admonition_title_open","p",1)).markup=l+" "+type,d.map=[r,a],(d=e.push("inline","",0)).content=title,d.map=[r,e.line-1],d.children=[],(d=e.push("admonition_title_close","p",-1)).markup=l+" "+type,e.md.block.tokenize(e,r+1,a),(d=e.push("admonition_close","div",-1)).markup=e.src.slice(k,i),d.block=!0,e.parentType=m,e.lineMax=p,e.line=a+(u?1:0),!0}md.block.ruler.before("code","admonition",admonition,{alt:["paragraph","reference","blockquote","list"]}),md.renderer.rules.admonition_open=render,md.renderer.rules.admonition_title_open=render,md.renderer.rules.admonition_title_close=render,md.renderer.rules.admonition_close=render;
		</script>
		<script>
			var isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;
			function convert() {
				const input = document.getElementById("input").value;
				const yamlRegex = /^---\n([\s\S]*?)\n---\n/;
				const match = input.match(yamlRegex);
				const yaml = match ? match[1] : null;
				var mdWithoutYaml = input.replace(yamlRegex, "");
				mdWithoutYaml = mdWithoutYaml.replaceAll(":::","!!!")
				let params;
				if (yaml) {
					params = jsyaml.load(yaml);
				}
				if (yaml && typeof params.maths !== "undefined" && params.maths === true) {
					mdWithoutYaml = mdWithoutYaml
					.replace(/\$\$(.*?)\$\$/g, '&#92;[$1&#92;]')
					.replace(/\$(.*?)\$/g, '&#92;\($1&#92;\)');
				}
				const html = md.render(mdWithoutYaml);
				const pattern1 = new RegExp(/\s(;!%\?:€»)/, "g");
				const pattern2 = new RegExp(/(«)\s/, "g");
				var htmlNbsp = html
					.replaceAll(" !", "&nbsp;!")
					.replaceAll(" ?", "&nbsp;?")
					.replaceAll(" ;", "&nbsp;;")
					.replaceAll(" :", "&nbsp;:")
					.replaceAll(" »", "&nbsp;»")
					.replaceAll("« ", "«&nbsp;");
				const template = `<!DOCTYPE html>
			<html>
			<head>
				<title>Diaporama</title>
				<meta charset="utf-8">
				${
					yaml && typeof params.maths !== "undefined" && params.maths === true
						? '<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"><\/script>'
						: ""
				}
				<style>:root{--nc-font-sans:"Inter",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--nc-font-mono:Consolas,monaco,"Ubuntu Mono","Liberation Mono","Courier New",Courier,monospace;--nc-tx-1:#000000;--nc-tx-2:#1a1a1a;--nc-bg-1:#ffffff;--nc-bg-2:#f6f8fa;--nc-bg-3:#e5e7eb;--nc-lk-1:#0070f3;--nc-lk-2:#0366d6;--nc-lk-tx:#ffffff;--nc-ac-1:#79ffe1;--nc-ac-tx:#0c4047;}@media (prefers-color-scheme:dark){:root{--nc-tx-1:#ffffff;--nc-tx-2:#eeeeee;--nc-bg-1:#000000;--nc-bg-2:#111111;--nc-bg-3:#222222;--nc-lk-1:#3291ff;--nc-lk-2:#0070f3;--nc-lk-tx:#ffffff;--nc-ac-1:#7928ca;--nc-ac-tx:#ffffff}}*{margin:0;padding:0;}address,area,article,aside,audio,blockquote,datalist,details,dl,fieldset,figure,form,iframe,img,input,meter,nav,ol,optgroup,option,output,p,pre,progress,ruby,section,table,textarea,ul,video{margin-bottom:1rem;}button,html,input,select{font-family:var(--nc-font-sans);}body{margin:0 auto;max-width:750px;padding:2rem;border-radius:6px;overflow-x:hidden;word-break:break-word;overflow-wrap:break-word;background:var(--nc-bg-1);color:var(--nc-tx-2);font-size:1.03rem;line-height:1.5;}::selection{background:var(--nc-ac-1);color:var(--nc-ac-tx);}h1,h2,h3,h4,h5,h6{line-height:1;color:var(--nc-tx-1);padding-top:.875rem;}h1,h2,h3{color:var(--nc-tx-1);padding-bottom:2px;margin-bottom:8px;}h4,h5,h6{margin-bottom:.3rem;}h1{font-size:2.25rem;}h2{font-size:1.85rem;}h3{font-size:1.55rem;}h4{font-size:1.25rem;}h5{font-size:1rem;}h6{font-size:.875rem;}a{color:var(--nc-lk-1);}a:hover{color:var(--nc-lk-2);}abbr:hover{cursor:help;}blockquote{padding:1.5rem;background:var(--nc-bg-2);border-left:5px solid var(--nc-bg-3);}abbr{cursor:help;}blockquote:last-child{padding-bottom:0;margin-bottom:0;}header{background:var(--nc-bg-2);border-bottom:1px solid var(--nc-bg-3);padding:2rem 1.5rem;margin:-2rem calc(0px - (50vw - 50%)) 2rem;padding-left:calc(50vw - 50%);padding-right:calc(50vw - 50%);}header h1,header h2,header h3{padding-bottom:0;border-bottom:0;}header>:first-child{margin-top:0;padding-top:0;}header>:last-child{margin-bottom:0;}a button,button,input[type="button"],input[type="reset"],input[type="submit"]{font-size:1rem;display:inline-block;padding:6px 12px;text-align:center;text-decoration:none;white-space:nowrap;background:var(--nc-lk-1);color:var(--nc-lk-tx);border:0;border-radius:4px;box-sizing:border-box;cursor:pointer;color:var(--nc-lk-tx);}a button[disabled],button[disabled],input[type="button"][disabled],input[type="reset"][disabled],input[type="submit"][disabled]{cursor:default;opacity:.5;cursor:not-allowed;}.button:focus,.button:hover,button:focus,button:hover,input[type="button"]:focus,input[type="button"]:hover,input[type="reset"]:focus,input[type="reset"]:hover,input[type="submit"]:focus,input[type="submit"]:hover{background:var(--nc-lk-2);}code,kbd,pre,samp{font-family:var(--nc-font-mono);}code,kbd,pre,samp{background:var(--nc-bg-2);border:1px solid var(--nc-bg-3);border-radius:4px;padding:3px 6px;font-size:.9rem;}kbd{border-bottom:3px solid var(--nc-bg-3);}pre{padding:1rem 1.4rem;max-width:100%;overflow:auto;}pre code{background:inherit;font-size:inherit;color:inherit;border:0;padding:0;margin:0;}code pre{display:inline;background:inherit;font-size:inherit;color:inherit;border:0;padding:0;margin:0;}details{padding:.6rem 1rem;background:var(--nc-bg-2);border:1px solid var(--nc-bg-3);border-radius:4px;}summary{cursor:pointer;font-weight:700;}details[open]{padding-bottom:.75rem;}details[open] summary{margin-bottom:6px;}details[open]>:last-child{margin-bottom:0;}dt{font-weight:700;}dd::before{content:"→ ";}hr{border:0;border-bottom:1px solid var(--nc-bg-3);margin:1rem auto;}fieldset{margin-top:1rem;padding:2rem;border:1px solid var(--nc-bg-3);border-radius:4px;}legend{padding:auto .5rem;}table{border-collapse:collapse;width:100%;}td,th{border:1px solid var(--nc-bg-3);text-align:left;padding:.5rem;}th{background:var(--nc-bg-2);}tr:nth-child(even){background:var(--nc-bg-2);}table caption{font-weight:700;margin-bottom:.5rem;}textarea{max-width:100%;}ol,ul{padding-left:2rem;}li{margin-top:.4rem;}ol ol,ol ul,ul ol,ul ul{margin-bottom:0;}mark{padding:3px 6px;background:var(--nc-ac-1);color:var(--nc-ac-tx);}input,select,textarea{padding:6px 12px;margin-bottom:.5rem;background:var(--nc-bg-2);color:var(--nc-tx-2);border:1px solid var(--nc-bg-3);border-radius:4px;box-shadow:none;box-sizing:border-box;}img{max-width:100%;}.info{color:var(--nc-lk-2);border:1px solid var(--nc-lk-2);padding:10px 15px;padding-top:1.5rem;border-radius:15px;margin:1rem 0;}.danger{color:#b94a48;border:1px solid #b94a48;padding:10px 15px;padding-top:1.5rem;border-radius:15px;margin:1rem 0;}.success{color:#018739;border:1px solid #018739;padding:10px 15px;padding-top:1.5rem;border-radius:15px;margin:1rem 0;}@media (prefers-color-scheme:dark){.info,.danger,.success{background-color:var(--nc-bg-2)}}#footnotes{margin-top:3rem;}a.footnote-back{margin-left:1em;opacity:.7;}figcaption{text-align:center;margin-top:-6rem;display:none;position:absolute;margin-left:1em;color:white;background-color:rgba(0,0,0,.5);padding:10px;}figure:hover figcaption{display:block;}h2,h3{margin-top:2.5rem;margin-bottom:2rem;padding-bottom:.6em;border-bottom:1px solid #9998;}h3{border-color:var(--nc-bg-3);}h4,h5,h6{margin-top:2rem;margin-bottom:1.5rem;}.general-toc{background-color:var(--nc-bg-2);padding:20px;margin:1em;}@media screen and (min-width:800px){.general-toc{margin:3em}}</style>
				<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/eyssette/weenote-reloaded@latest/slides-theme.min.css"></link>
				<script src="https://cdn.jsdelivr.net/gh/eyssette/weenote-reloaded@latest/weenote-reloaded-auto.min.js"><\/script>
			</head>
			<body>${htmlNbsp}	
			</body>
			</html>`;
				const result = window.open();
				result.document.write(template);
				result.document.close();
			}
		</script>
	</body>
</html>